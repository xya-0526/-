# 单点登录

## 两种模式 

1.session +cooike 

2 token 模式

## session +cooike

实现原理 ：

用户 登录某系统 跳转 到 认证中心 进行登录 认证中心 使用session表（键值对表） 存储用户登录信息表示已经登录  然后返回 全局cooike+sid     给用户  子系统 拿到 sid 后向认证中心进行确认   

优点：

认证中心有较强的控制 所有子系统都要经过 认证中心经行确认

缺点：

1.一旦认证中心挂掉所有系统都不能登录

2. 认证中心会被频繁访问照成系统崩溃
3. 某一子系统需要扩容时 认证中心也必须扩容
4. 总结 维护成本高

##  token模式

实现原理：

用户 初次登录某子系统 跳转到 认证系统 经行登录 认证系统返还一个token  给用户  子系统 拿到token 直接自行进行token的校验认证  认证成功后开放保护资源

优点：

1.减小了 认证中心的压力 

2.降低维护成本

缺点 ：

1.认证中心失去对子系统的控制





## 双token

原理：用户 初次登录某子系统 跳转到 认证系统 经行登录 认证系统返还两个token 一个普通的短期token 一个只有认证中心识别的长期token 短期token 用于 子系统登录 当短期token失效时 会拿 长期token 与认证中心 校验 校验成功 重新给用户一个短期token 

优点 弥补了认证中心失去对子系统的控制 

