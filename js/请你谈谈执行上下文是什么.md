# 执行上下文

### 一、什么是执行上下文（Execution Context）？

执行上下文是 JavaScript 代码执行的环境。每当运行一段js可执行代码（比如一个函数、全局代码或 `eval`），就会创建一个对应的执行上下文。

> 简单理解：**执行上下文就是变量、函数、`this` 等信息的运行环境**。

## 常见的三种执行上下文

### 1.全局执行上下文 

- 页面加载时默认创建。
- `this` 指向 `window`（浏览器）或 `global`（Node）。
- 只能有一个。

### 2.局部（函数）执行上下文

- 每次函数调用时都会创建新的上下文。
- 有自己的变量、参数、`this`、作用域链等。
- 可以有很多



### 3**Eval 执行上下文**（了解即可）

- 由 `eval()` 执行的代码创建。

## 二、执行上下文的生命周期

1. **创建阶段**：
   - 确定作用域链。
   - 创建变量对象（包含变量、函数声明、参数等）。
   - 确定 `this` 的指向。
2. **执行阶段**：
   - 执行代码并分配变量值、执行函数等。

### 三、什么是执行栈（Call Stack）？

执行栈也叫调用栈，是一种数据结构（**后进先出 - LIFO**），用来管理执行上下文的执行顺序。

#### 执行流程如下：

- JS 引擎初始化时，先创建**全局执行上下文**，压入栈中。
- 每调用一个函数，就会创建新的函数执行上下文，并压入栈顶。
- 函数执行完毕，其上下文被弹出，控制权返回到上一个上下文。
- 程序结束后，全局上下文被弹出，执行栈清空。





### ✅ 总结一句话：

> **执行上下文是“执行环境”，执行栈是“执行顺序”。**
>  JavaScript 是单线程语言，执行栈保证了函数调用的有序执行。